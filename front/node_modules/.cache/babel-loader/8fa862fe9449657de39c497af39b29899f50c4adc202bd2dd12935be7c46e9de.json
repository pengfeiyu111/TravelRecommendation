{"ast":null,"code":"import { initDepartment } from \"@/api/index\";\nexport default {\n  name: \"departmentChoose\",\n  props: {},\n  data() {\n    return {\n      selectDep: [],\n      department: []\n    };\n  },\n  methods: {\n    initDepartmentData() {\n      initDepartment().then(res => {\n        if (res.success) {\n          res.result.forEach(function (e) {\n            if (e.isParent) {\n              e.value = e.id;\n              e.label = e.title;\n              e.loading = false;\n              e.children = [];\n            } else {\n              e.value = e.id;\n              e.label = e.title;\n            }\n            if (e.status == -1) {\n              e.label = \"[已禁用] \" + e.label;\n              e.disabled = true;\n            }\n          });\n          this.department = res.result;\n        }\n      });\n    },\n    loadData(item, callback) {\n      item.loading = true;\n      initDepartment({\n        parentId: item.value\n      }).then(res => {\n        item.loading = false;\n        if (res.success) {\n          res.result.forEach(function (e) {\n            if (e.isParent) {\n              e.value = e.id;\n              e.label = e.title;\n              e.loading = false;\n              e.children = [];\n            } else {\n              e.value = e.id;\n              e.label = e.title;\n            }\n            if (e.status == -1) {\n              e.label = \"[已禁用] \" + e.label;\n              e.disabled = true;\n            }\n          });\n          item.children = res.result;\n          callback();\n        }\n      });\n    },\n    handleChangeDep(value, selectedData) {\n      let departmentId = \"\";\n      // 获取最后一个值\n      if (value && value.length > 0) {\n        departmentId = value[value.length - 1];\n      }\n      this.$emit(\"on-change\", departmentId);\n    },\n    clearSelect() {\n      this.selectDep = [];\n    }\n  },\n  mounted() {\n    this.initDepartmentData();\n  }\n};","map":{"version":3,"names":["initDepartment","name","props","data","selectDep","department","methods","initDepartmentData","then","res","success","result","forEach","e","isParent","value","id","label","title","loading","children","status","disabled","loadData","item","callback","parentId","handleChangeDep","selectedData","departmentId","length","$emit","clearSelect","mounted"],"sources":["src/views/template/department-choose.vue"],"sourcesContent":["<template>\r\n<div>\r\n    <Cascader v-model=\"selectDep\" :data=\"department\" :load-data=\"loadData\" @on-change=\"handleChangeDep\" change-on-select filterable clearable placeholder=\"选择部门\"></Cascader>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    initDepartment\r\n} from \"@/api/index\";\r\nexport default {\r\n    name: \"departmentChoose\",\r\n    props: {\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            selectDep: [],\r\n            department: []\r\n        };\r\n    },\r\n    methods: {\r\n        initDepartmentData() {\r\n            initDepartment().then(res => {\r\n                if (res.success) {\r\n                    res.result.forEach(function (e) {\r\n                        if (e.isParent) {\r\n                            e.value = e.id;\r\n                            e.label = e.title;\r\n                            e.loading = false;\r\n                            e.children = [];\r\n                        } else {\r\n                            e.value = e.id;\r\n                            e.label = e.title;\r\n                        }\r\n                        if (e.status == -1) {\r\n                            e.label = \"[已禁用] \" + e.label;\r\n                            e.disabled = true;\r\n                        }\r\n                    });\r\n                    this.department = res.result;\r\n                }\r\n            });\r\n        },\r\n        loadData(item, callback) {\r\n            item.loading = true;\r\n            initDepartment({\r\n                parentId: item.value\r\n            }).then(res => {\r\n                item.loading = false;\r\n                if (res.success) {\r\n                    res.result.forEach(function (e) {\r\n                        if (e.isParent) {\r\n                            e.value = e.id;\r\n                            e.label = e.title;\r\n                            e.loading = false;\r\n                            e.children = [];\r\n                        } else {\r\n                            e.value = e.id;\r\n                            e.label = e.title;\r\n                        }\r\n                        if (e.status == -1) {\r\n                            e.label = \"[已禁用] \" + e.label;\r\n                            e.disabled = true;\r\n                        }\r\n                    });\r\n                    item.children = res.result;\r\n                    callback();\r\n                }\r\n            });\r\n        },\r\n        handleChangeDep(value, selectedData) {\r\n            let departmentId = \"\";\r\n            // 获取最后一个值\r\n            if (value && value.length > 0) {\r\n                departmentId = value[value.length - 1];\r\n            }\r\n            this.$emit(\"on-change\", departmentId);\r\n        },\r\n        clearSelect() {\r\n            this.selectDep = [];\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initDepartmentData();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n</style>\r\n"],"mappings":"AAOA,SACAA,cAAA,QACA;AACA;EACAC,IAAA;EACAC,KAAA,GAEA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,UAAA;IACA;EACA;EACAC,OAAA;IACAC,mBAAA;MACAP,cAAA,GAAAQ,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,OAAA;UACAD,GAAA,CAAAE,MAAA,CAAAC,OAAA,WAAAC,CAAA;YACA,IAAAA,CAAA,CAAAC,QAAA;cACAD,CAAA,CAAAE,KAAA,GAAAF,CAAA,CAAAG,EAAA;cACAH,CAAA,CAAAI,KAAA,GAAAJ,CAAA,CAAAK,KAAA;cACAL,CAAA,CAAAM,OAAA;cACAN,CAAA,CAAAO,QAAA;YACA;cACAP,CAAA,CAAAE,KAAA,GAAAF,CAAA,CAAAG,EAAA;cACAH,CAAA,CAAAI,KAAA,GAAAJ,CAAA,CAAAK,KAAA;YACA;YACA,IAAAL,CAAA,CAAAQ,MAAA;cACAR,CAAA,CAAAI,KAAA,cAAAJ,CAAA,CAAAI,KAAA;cACAJ,CAAA,CAAAS,QAAA;YACA;UACA;UACA,KAAAjB,UAAA,GAAAI,GAAA,CAAAE,MAAA;QACA;MACA;IACA;IACAY,SAAAC,IAAA,EAAAC,QAAA;MACAD,IAAA,CAAAL,OAAA;MACAnB,cAAA;QACA0B,QAAA,EAAAF,IAAA,CAAAT;MACA,GAAAP,IAAA,CAAAC,GAAA;QACAe,IAAA,CAAAL,OAAA;QACA,IAAAV,GAAA,CAAAC,OAAA;UACAD,GAAA,CAAAE,MAAA,CAAAC,OAAA,WAAAC,CAAA;YACA,IAAAA,CAAA,CAAAC,QAAA;cACAD,CAAA,CAAAE,KAAA,GAAAF,CAAA,CAAAG,EAAA;cACAH,CAAA,CAAAI,KAAA,GAAAJ,CAAA,CAAAK,KAAA;cACAL,CAAA,CAAAM,OAAA;cACAN,CAAA,CAAAO,QAAA;YACA;cACAP,CAAA,CAAAE,KAAA,GAAAF,CAAA,CAAAG,EAAA;cACAH,CAAA,CAAAI,KAAA,GAAAJ,CAAA,CAAAK,KAAA;YACA;YACA,IAAAL,CAAA,CAAAQ,MAAA;cACAR,CAAA,CAAAI,KAAA,cAAAJ,CAAA,CAAAI,KAAA;cACAJ,CAAA,CAAAS,QAAA;YACA;UACA;UACAE,IAAA,CAAAJ,QAAA,GAAAX,GAAA,CAAAE,MAAA;UACAc,QAAA;QACA;MACA;IACA;IACAE,gBAAAZ,KAAA,EAAAa,YAAA;MACA,IAAAC,YAAA;MACA;MACA,IAAAd,KAAA,IAAAA,KAAA,CAAAe,MAAA;QACAD,YAAA,GAAAd,KAAA,CAAAA,KAAA,CAAAe,MAAA;MACA;MACA,KAAAC,KAAA,cAAAF,YAAA;IACA;IACAG,YAAA;MACA,KAAA5B,SAAA;IACA;EACA;EACA6B,QAAA;IACA,KAAA1B,kBAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}