{"ast":null,"code":"import axios from 'axios';\nimport { getStore, setStore } from './storage';\nimport { router } from '../router/index';\nimport { Message } from 'view-design';\nimport Cookies from 'js-cookie';\nlet base = '/zwz';\naxios.defaults.timeout = 15000;\naxios.interceptors.request.use(config => {\n  return config;\n}, err => {\n  Message.error('请求超时');\n  return Promise.resolve(err);\n});\naxios.interceptors.response.use(response => {\n  const data = response.data;\n  switch (data.code) {\n    case 401:\n      Cookies.set('userInfo', '');\n      setStore('accessToken', '');\n      if (router.history.current.name != \"login\") {\n        if (data.message !== null) {\n          Message.error(data.message);\n        } else {\n          Message.error(\"未知错误，请重新登录\");\n        }\n        router.push('/login');\n      }\n      break;\n    case 403:\n      if (data.message !== null) {\n        Message.error(data.message);\n      } else {\n        Message.error(\"未知错误\");\n      }\n      break;\n    case 500:\n      if (data.message !== null) {\n        Message.error(data.message);\n      } else {\n        Message.error(\"未知错误\");\n      }\n      break;\n    default:\n      return data;\n  }\n  return data;\n}, err => {\n  Message.error(err.toString());\n  return Promise.resolve(err);\n});\nexport const getRequest = (url, params) => {\n  let accessToken = getStore('accessToken');\n  return axios({\n    method: 'get',\n    url: `${base}${url}`,\n    params: params,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\nexport const postRequest = (url, params) => {\n  let accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'post',\n    url: `${base}${url}`,\n    data: params,\n    transformRequest: [function (data) {\n      let ret = '';\n      for (let it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n      ret = ret.substring(0, ret.length - 1);\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'accessToken': accessToken\n    }\n  });\n};\nexport const putRequest = (url, params) => {\n  let accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'put',\n    url: `${base}${url}`,\n    data: params,\n    transformRequest: [function (data) {\n      let ret = '';\n      for (let it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n      ret = ret.substring(0, ret.length - 1);\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'accessToken': accessToken\n    }\n  });\n};\nexport const postBodyRequest = (url, params) => {\n  let accessToken = getStore('accessToken');\n  return axios({\n    method: 'post',\n    url: `${base}${url}`,\n    data: params,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\nexport const getNoAuthRequest = (url, params) => {\n  return axios({\n    method: 'get',\n    url: `${base}${url}`,\n    params: params\n  });\n};\nexport const postNoAuthRequest = (url, params) => {\n  return axios({\n    method: 'post',\n    url: `${base}${url}`,\n    data: params,\n    transformRequest: [function (data) {\n      let ret = '';\n      for (let it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n      ret = ret.substring(0, ret.length - 1);\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n};","map":{"version":3,"names":["axios","getStore","setStore","router","Message","Cookies","base","defaults","timeout","interceptors","request","use","config","err","error","Promise","resolve","response","data","code","set","history","current","name","message","push","toString","getRequest","url","params","accessToken","method","headers","postRequest","transformRequest","ret","it","encodeURIComponent","substring","length","putRequest","postBodyRequest","getNoAuthRequest","postNoAuthRequest"],"sources":["D:/TravelRecommendation/front/src/libs/axios.js"],"sourcesContent":["import axios from 'axios';\r\nimport { getStore, setStore } from './storage';\r\nimport { router } from '../router/index';\r\nimport { Message } from 'view-design';\r\nimport Cookies from 'js-cookie';\r\nlet base = '/zwz';\r\n\r\naxios.defaults.timeout = 15000;\r\naxios.interceptors.request.use(config => {\r\n    return config;\r\n}, err => {\r\n    Message.error('请求超时');\r\n    return Promise.resolve(err);\r\n});\r\n\r\naxios.interceptors.response.use(response => {\r\n    const data = response.data;\r\n\r\n    switch (data.code) {\r\n        case 401:\r\n            Cookies.set('userInfo', '');\r\n            setStore('accessToken', '');\r\n            if (router.history.current.name != \"login\") {\r\n                if (data.message !== null) {\r\n                    Message.error(data.message);\r\n                } else {\r\n                    Message.error(\"未知错误，请重新登录\");\r\n                }\r\n                router.push('/login');\r\n            }\r\n            break;\r\n        case 403:\r\n            if (data.message !== null) {\r\n                Message.error(data.message);\r\n            } else {\r\n                Message.error(\"未知错误\");\r\n            }\r\n            break;\r\n        case 500:\r\n            if (data.message !== null) {\r\n                Message.error(data.message);\r\n            } else {\r\n                Message.error(\"未知错误\");\r\n            }\r\n            break;\r\n        default:\r\n            return data;\r\n    }\r\n\r\n    return data;\r\n}, (err) => {\r\n    Message.error(err.toString());\r\n    return Promise.resolve(err);\r\n});\r\n\r\nexport const getRequest = (url, params) => {\r\n    let accessToken = getStore('accessToken');\r\n    return axios({\r\n        method: 'get',\r\n        url: `${base}${url}`,\r\n        params: params,\r\n        headers: {\r\n            'accessToken': accessToken\r\n        }\r\n    });\r\n};\r\n\r\nexport const postRequest = (url, params) => {\r\n    let accessToken = getStore(\"accessToken\");\r\n    return axios({\r\n        method: 'post',\r\n        url: `${base}${url}`,\r\n        data: params,\r\n        transformRequest: [function (data) {\r\n            let ret = '';\r\n            for (let it in data) {\r\n                ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\r\n            }\r\n            ret = ret.substring(0, ret.length - 1);\r\n            return ret;\r\n        }],\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n            'accessToken': accessToken\r\n        }\r\n    });\r\n};\r\n\r\nexport const putRequest = (url, params) => {\r\n    let accessToken = getStore(\"accessToken\");\r\n    return axios({\r\n        method: 'put',\r\n        url: `${base}${url}`,\r\n        data: params,\r\n        transformRequest: [function (data) {\r\n            let ret = '';\r\n            for (let it in data) {\r\n                ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\r\n            }\r\n            ret = ret.substring(0, ret.length - 1);\r\n            return ret;\r\n        }],\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n            'accessToken': accessToken\r\n        }\r\n    });\r\n};\r\n\r\nexport const postBodyRequest = (url, params) => {\r\n    let accessToken = getStore('accessToken');\r\n    return axios({\r\n        method: 'post',\r\n        url: `${base}${url}`,\r\n        data: params,\r\n        headers: {\r\n            'accessToken': accessToken\r\n        }\r\n    });\r\n};\r\n\r\nexport const getNoAuthRequest = (url, params) => {\r\n    return axios({\r\n        method: 'get',\r\n        url: `${base}${url}`,\r\n        params: params\r\n    });\r\n};\r\n\r\nexport const postNoAuthRequest = (url, params) => {\r\n    return axios({\r\n        method: 'post',\r\n        url: `${base}${url}`,\r\n        data: params,\r\n        transformRequest: [function (data) {\r\n            let ret = '';\r\n            for (let it in data) {\r\n                ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\r\n            }\r\n            ret = ret.substring(0, ret.length - 1);\r\n            return ret;\r\n        }],\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n        }\r\n    });\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}