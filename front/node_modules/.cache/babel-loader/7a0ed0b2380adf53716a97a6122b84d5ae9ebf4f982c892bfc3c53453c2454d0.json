{"ast":null,"code":"import { regist, drawCodeImage, initCaptcha } from \"@/api/index\";\nimport { validateMobile, validatePassword } from \"@/libs/validate\";\nexport default {\n  components: {},\n  data() {\n    return {\n      captchaId: \"\",\n      captchaImg: \"\",\n      error: false,\n      loading: false,\n      errorCode: \"\",\n      form: {\n        username: \"\",\n        password: \"\",\n        mobile: \"\",\n        code: \"\",\n        captchaId: \"\"\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: \"请输入手机号\",\n          trigger: \"blur\"\n        }, {\n          validator: validateMobile,\n          trigger: \"blur\"\n        }],\n        nickname: [{\n          required: true,\n          message: \"请输入您的姓名\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入登录密码\",\n          trigger: \"blur\"\n        }, {\n          validator: validatePassword,\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    getCaptchaImg() {\n      this.loadingCaptcha = true;\n      initCaptcha().then(res => {\n        this.loadingCaptcha = false;\n        if (res.success) {\n          this.captchaId = res.result;\n          this.captchaImg = drawCodeImage + this.captchaId;\n        }\n      });\n    },\n    submitRegist() {\n      this.form.captchaId = this.captchaId;\n      this.form.mobile = this.form.username;\n      this.$refs.usernameLoginForm.validate(valid => {\n        if (valid) {\n          if (!this.form.code) {\n            this.errorCode = \"验证码不能为空\";\n            return;\n          } else {\n            this.errorCode = \"\";\n          }\n          this.loading = true;\n          regist(this.form).then(res => {\n            this.loading = false;\n            if (res.success) {\n              this.$router.push({\n                name: \"login\"\n              });\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted() {\n    this.getCaptchaImg();\n  }\n};","map":{"version":3,"names":["regist","drawCodeImage","initCaptcha","validateMobile","validatePassword","components","data","captchaId","captchaImg","error","loading","errorCode","form","username","password","mobile","code","rules","required","message","trigger","validator","nickname","methods","getCaptchaImg","loadingCaptcha","then","res","success","result","submitRegist","$refs","usernameLoginForm","validate","valid","$router","push","name","mounted"],"sources":["src/views/regist.vue"],"sourcesContent":["<template>\r\n<div class=\"login\">\r\n    <Row justify=\"center\" align=\"middle\" @keydown.enter.native=\"submitRegist\" style=\"height:100%\">\r\n        <div class=\"loginUp\">\r\n            <div class=\"loginLeft\">\r\n                <img src=\"../assets/login/logo.png\" alt=\"\" srcset=\"\">\r\n                <span class=\"line\"></span>\r\n                <span class=\"title\">基于协同算法的海南旅游推荐系统</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"loginMiddle\">\r\n            <div class=\"login-background\">\r\n                <div class=\"loginBg\"></div>\r\n                <div class=\"loginRight\">\r\n                    <Row v-if=\"!socialLogining\" class=\"loginRow\">\r\n                        <Form ref=\"usernameLoginForm\" :model=\"form\" :rules=\"rules\" class=\"form\" style=\"width:100%\">\r\n                            <FormItem prop=\"username\" class=\"loginInput\">\r\n                                <Row>\r\n                                    <Input v-model=\"form.username\" size=\"large\" clearable placeholder=\"您的手机号\" autocomplete=\"off\">\r\n                                    <Icon class=\"iconfont icon-yonghu\" slot=\"prefix\" style=\"line-height:50px\" />\r\n                                    </Input>\r\n                                </Row>\r\n                            </FormItem>\r\n                            <FormItem prop=\"nickname\" class=\"loginInput\">\r\n                                <Row>\r\n                                    <Input v-model=\"form.nickname\" size=\"large\" clearable placeholder=\"您的姓名\" autocomplete=\"off\">\r\n                                    <Icon class=\"iconfont icon-yonghu\" slot=\"prefix\" style=\"line-height:50px\" />\r\n                                    </Input>\r\n                                </Row>\r\n                            </FormItem>\r\n                            <FormItem prop=\"password\">\r\n                                <Input style=\"height:50px;line-height:50px\" type=\"password\" v-model=\"form.password\" size=\"large\" placeholder=\"您的密码\" password autocomplete=\"off\">\r\n                                <Icon class=\"iconfont icon-mima1\" slot=\"prefix\" style=\"line-height:50px\" />\r\n                                </Input>\r\n                            </FormItem>\r\n                            <FormItem prop=\"code\">\r\n                                <Row type=\"flex\" justify=\"space-between\" style=\"align-items: center;overflow: hidden;\">\r\n                                    <Col span=\"16\">\r\n                                    <Input v-model=\"form.code\" size=\"large\" clearable placeholder=\"请输入图片验证码\" style=\"width:90%\" :maxlength=\"10\" class=\"input-verify\" />\r\n                                    </Col>\r\n                                    <Col span=\"8\">\r\n                                    <div class=\"code-image\" style=\"position:relative;font-size:12px;width:100%\">\r\n                                        <Spin v-if=\"loadingCaptcha\" fix></Spin>\r\n                                        <img :src=\"captchaImg\" @click=\"getCaptchaImg\" alt=\"加载验证码失败\" style=\"width:110px;cursor:pointer;display:block\" />\r\n                                    </div>\r\n                                    </Col>\r\n                                </Row>\r\n                            </FormItem>\r\n                        </Form>\r\n                        <Row>\r\n                            <Button class=\"login-btn\" type=\"primary\" size=\"large\" :loading=\"loading\" @click=\"submitRegist\" long>\r\n                                <span v-if=\"!loading\" style=\"letter-spacing:20px; font-weight:bold\">注册</span>\r\n                                <span v-else>正在注册</span>\r\n                            </Button>\r\n                        </Row>\r\n                        <Row>\r\n                            <router-link to=\"/login\">\r\n                                <Button class=\"login-btn\" type=\"primary\" size=\"large\" long>返回登录</Button>\r\n                            </router-link>\r\n                        </Row>\r\n                    </Row>\r\n                    <p class=\"loginBottom\">\r\n                        ART YOUR DREAM\r\n                    </p>\r\n                    <div v-if=\"socialLogining\">\r\n                        <RectLoading />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"loginDown\">\r\n            <p style=\"margin-top:10px\">帮助 | 隐私 | 条款</p>\r\n            <p>\r\n                <span>Copyright © 2020 - 至今 XXX 版权所有</span>\r\n                <span style=\"display:inline-block; width:4px;height:6px\"></span>\r\n                <a target=\"_blank\" href=\"https://beian.miit.gov.cn\" style=\"color:#848585\">ICP备案 浙ICP备XXXXXXXX号</a>\r\n                <a target=\"_blank\" href=\"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=XXXXXXXXXXXXXX号\">\r\n                    <img src=\"../assets/login/gonganlogo.png\" style=\"margin-left:6px\" />\r\n                    <p style=\"display:inline-block;color:#848585\">浙公网安备 XXXXXXXXXXXXXX号</p>\r\n                </a>\r\n            </p>\r\n        </div>\r\n    </Row>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    regist,\r\n    drawCodeImage,\r\n    initCaptcha\r\n} from \"@/api/index\";\r\nimport {\r\n    validateMobile,\r\n    validatePassword\r\n} from \"@/libs/validate\";\r\nexport default {\r\n    components: {\r\n    },\r\n    data() {\r\n        return {\r\n            captchaId: \"\",\r\n            captchaImg: \"\",\r\n            error: false,\r\n            loading: false,\r\n            errorCode: \"\",\r\n            form: {\r\n                username: \"\",\r\n                password: \"\",\r\n                mobile: \"\",\r\n                code: \"\",\r\n                captchaId: \"\"\r\n            },\r\n            rules: {\r\n                username: [{\r\n                        required: true,\r\n                        message: \"请输入手机号\",\r\n                        trigger: \"blur\"\r\n                    },\r\n                    {\r\n                        validator: validateMobile,\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n                nickname: [{\r\n                    required: true,\r\n                    message: \"请输入您的姓名\",\r\n                    trigger: \"blur\"\r\n                }],\r\n                password: [{\r\n                        required: true,\r\n                        message: \"请输入登录密码\",\r\n                        trigger: \"blur\"\r\n                    },\r\n                    {\r\n                        validator: validatePassword,\r\n                        trigger: \"blur\"\r\n                    }\r\n                ]\r\n            }\r\n        };\r\n    },\r\n    methods: {\r\n        getCaptchaImg() {\r\n            this.loadingCaptcha = true;\r\n            initCaptcha().then(res => {\r\n                this.loadingCaptcha = false;\r\n                if (res.success) {\r\n                    this.captchaId = res.result;\r\n                    this.captchaImg = drawCodeImage + this.captchaId;\r\n                }\r\n            });\r\n        },\r\n        submitRegist() {\r\n            this.form.captchaId = this.captchaId;\r\n            this.form.mobile = this.form.username;\r\n            this.$refs.usernameLoginForm.validate(valid => {\r\n                if (valid) {\r\n                    if (!this.form.code) {\r\n                        this.errorCode = \"验证码不能为空\";\r\n                        return;\r\n                    } else {\r\n                        this.errorCode = \"\";\r\n                    }\r\n                    this.loading = true;\r\n                    regist(this.form).then(res => {\r\n                        this.loading = false;\r\n                        if (res.success) {\r\n                            this.$router.push({\r\n                                name: \"login\"\r\n                            });\r\n                        } \r\n                    });\r\n                }\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getCaptchaImg();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\nhtml,body{\r\n    background: #ffffff !important;\r\n    font-family: Microsoft YaHei;\r\n    font-weight: 400;;\r\n}\r\na{   \r\n    font-family: Microsoft YaHei;\r\n   \r\n    color: #77C8C6;\r\n}\r\ninput::-webkit-input-placeholder {\r\n\t/* placeholder字体大小  */\r\n\tfont-size: 14px;\r\n}\r\n.ivu-checkbox-wrapper.ivu-checkbox-large{\r\n    font-size: 14px;\r\n}\r\na:hover{\r\n    font-family: Microsoft YaHei;\r\n    color: #77C8C6;\r\n}\r\n.login {\r\n    height: 100%;\r\n    background-color: #ffffff;\r\n\r\n    .ivu-tabs-nav-container {\r\n        line-height: 2;\r\n        font-size: 17px;\r\n        box-sizing: border-box;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        position: relative;\r\n        zoom: 1;\r\n    }\r\n\r\n    // loginUp login logo\r\n    .loginUp{\r\n       width: 1200px;\r\n       min-height: 80px;\r\n       background-color:#ffffff;\r\n       margin: 0 auto;\r\n       overflow: hidden;\r\n    }\r\n    .loginLeft{\r\n        margin-top: 20px;\r\n        height: 50px;\r\n        display: flex;\r\n    }\r\n    .line{\r\n        display: inline-block;\r\n        width: 2px;\r\n        height: 25px;\r\n        background: url(../assets/login/line.png);\r\n        margin: 0px 10px;\r\n        margin-top: 15px;\r\n    }\r\n    .title{\r\n        line-height: 58px; \r\n        font-size: 18px;\r\n        font-family: Microsoft YaHei;\r\n        font-weight: 500;\r\n        color: #999999;\r\n    }\r\n    .loginMiddle{\r\n        width: 100%;\r\n        height: 780px;\r\n        margin: 0 auto; \r\n        background-color: #d8d098;\r\n        overflow: hidden;\r\n        // background: linear-gradient(45deg, rgba(2, 173, 168, 0.17), rgba(0, 221, 215, 0.17)); \r\n    }     \r\n    .login-background{\r\n        width: 1200px;\r\n        height: 780px;\r\n        margin: 0 auto;   \r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n    .loginBg{\r\n        width: 560px;\r\n        height: 684px;\r\n        margin-top: -20px;\r\n        background-image: url(../assets/login/star.png);\r\n        background-repeat: no-repeat;\r\n        background-position: left bottom;\r\n    }\r\n    .loginRight{\r\n        width: 450px;\r\n        height: 550px;\r\n        background-color: #ffffff;\r\n        border: 1px solid #E6E6E6;\r\n        box-shadow: 0px 2px 15px 1px rgba(0, 0, 0, 0.1);\r\n        border-radius: 5px;\r\n        margin-top: 115px;\r\n        position: relative;\r\n    }\r\n    .loginRow{\r\n        padding: 0px 30px;\r\n    }\r\n    .loginDown{\r\n        width: 1200px;\r\n        height: auto;\r\n        margin: 0 auto;\r\n        \r\n    }\r\n    .loginTab{\r\n        margin-top: 20px;\r\n    }\r\n    .ivu-tabs-tab{\r\n        color: #333333;     \r\n        font-size: 18px;\r\n        font-family: Microsoft YaHei;\r\n        font-weight: bold;\r\n    }\r\n    .ivu-tabs-nav .ivu-tabs-tab{\r\n        padding: 8px 42px;\r\n        margin-right: 0px;\r\n    }\r\n    .ivu-tabs-ink-bar{\r\n        height: 4px;\r\n        width: 86px !important;\r\n        border-radius: 2px;\r\n        margin: 0px 42px;\r\n        background-color: #d8d098;\r\n    }\r\n    .ivu-tabs-nav .ivu-tabs-tab-active,.ivu-tabs-nav .ivu-tabs-tab:hover{\r\n        color: #333333;   \r\n    }\r\n    .loginInput{\r\n        font-size: 18px;    \r\n        font-family: Microsoft YaHei;\r\n        font-weight: bold;\r\n        color: #333333;\r\n    }\r\n\r\n    .ivu-tabs-bar{\r\n        border-bottom: 0px;\r\n    }\r\n    .login-btn{\r\n        width: 390px;\r\n        height: 50px;\r\n        background: radial-gradient(circle, #77C8C6, #50C7C4);\r\n        border: 2px solid #61C8C5;\r\n        box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.21);\r\n        border-radius: 4px;\r\n    }\r\n    .login .login-btn, .login .other-login{\r\n        margin-top: 40px;\r\n    }\r\n    .loginBottom{\r\n        width: 448px;\r\n        height: 60px;      \r\n        background: #f9f9f9;\r\n        border-radius: 0px 0px 5px 5px;\r\n        padding: 0px;\r\n        position: absolute;\r\n        bottom: 0px;  \r\n        font-size: 16px;\r\n        font-weight: bold;\r\n        color: #d8d098;\r\n        text-align: center;\r\n        line-height: 60px;\r\n    }\r\n    .loginDown p{\r\n        text-align: center;       \r\n        font-size: 12px;\r\n        font-family: Microsoft YaHei;\r\n        color: #777777;\r\n        line-height: 22px;\r\n    }\r\n    .ivu-checkbox-checked .ivu-checkbox-inner{\r\n        background-color: #d8d098;\r\n        border-color: #d8d098;\r\n    }\r\n    .ivu-form-item{\r\n        margin-bottom: 24px;\r\n    }\r\n    .ivu-input-wrapper-large .ivu-input-icon{\r\n        line-height: 50px;\r\n    }\r\n    .loginInput input:nth-of-type(1){\r\n        height: 50px;  \r\n        font-size: 18px;\r\n        font-weight: bold;\r\n        font-family: Microsoft YaHei;\r\n        color: #333333;\r\n        line-height: 50px;\r\n    }\r\n    .ivu-input-large{\r\n        height: 50px;  \r\n        color:#CFCFCF;\r\n        line-height: 50px;\r\n    }\r\n    .ivu-input-large{\r\n        font-size: 14px;\r\n    }\r\n    .ivu-btn-large{\r\n        height: 50px;\r\n    }\r\n    .form {\r\n        padding-top: 2vh;\r\n\r\n        .input-verify {\r\n            width: 67%;\r\n        }\r\n    }\r\n\r\n    .code-image {\r\n        .ivu-spin-fix .ivu-spin-main {\r\n            height: 20px;\r\n        }\r\n    }\r\n\r\n    .forget-pass,\r\n    .other-way {\r\n        font-size: 14px;\r\n    }\r\n\r\n    .login-btn,\r\n    .other-login {\r\n        margin-top: 40px;\r\n    }\r\n\r\n    .icons {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    .other-icon {\r\n        cursor: pointer;\r\n        margin-left: 10px;\r\n        display: flex;\r\n        align-items: center;\r\n        color: rgba(0, 0, 0, .2);\r\n\r\n        :hover {\r\n            color: #2d8cf0;\r\n        }\r\n    }\r\n\r\n    .layout {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-between;\r\n        width: 368px;\r\n        height: 100%;\r\n    }\r\n}\r\n</style>\r\n"],"mappings":"AAuFA,SACAA,MAAA,EACAC,aAAA,EACAC,WAAA,QACA;AACA,SACAC,cAAA,EACAC,gBAAA,QACA;AACA;EACAC,UAAA,GACA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,UAAA;MACAC,KAAA;MACAC,OAAA;MACAC,SAAA;MACAC,IAAA;QACAC,QAAA;QACAC,QAAA;QACAC,MAAA;QACAC,IAAA;QACAT,SAAA;MACA;MACAU,KAAA;QACAJ,QAAA;UACAK,QAAA;UACAC,OAAA;UACAC,OAAA;QACA,GACA;UACAC,SAAA,EAAAlB,cAAA;UACAiB,OAAA;QACA,EACA;QACAE,QAAA;UACAJ,QAAA;UACAC,OAAA;UACAC,OAAA;QACA;QACAN,QAAA;UACAI,QAAA;UACAC,OAAA;UACAC,OAAA;QACA,GACA;UACAC,SAAA,EAAAjB,gBAAA;UACAgB,OAAA;QACA;MAEA;IACA;EACA;EACAG,OAAA;IACAC,cAAA;MACA,KAAAC,cAAA;MACAvB,WAAA,GAAAwB,IAAA,CAAAC,GAAA;QACA,KAAAF,cAAA;QACA,IAAAE,GAAA,CAAAC,OAAA;UACA,KAAArB,SAAA,GAAAoB,GAAA,CAAAE,MAAA;UACA,KAAArB,UAAA,GAAAP,aAAA,QAAAM,SAAA;QACA;MACA;IACA;IACAuB,aAAA;MACA,KAAAlB,IAAA,CAAAL,SAAA,QAAAA,SAAA;MACA,KAAAK,IAAA,CAAAG,MAAA,QAAAH,IAAA,CAAAC,QAAA;MACA,KAAAkB,KAAA,CAAAC,iBAAA,CAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,UAAAtB,IAAA,CAAAI,IAAA;YACA,KAAAL,SAAA;YACA;UACA;YACA,KAAAA,SAAA;UACA;UACA,KAAAD,OAAA;UACAV,MAAA,MAAAY,IAAA,EAAAc,IAAA,CAAAC,GAAA;YACA,KAAAjB,OAAA;YACA,IAAAiB,GAAA,CAAAC,OAAA;cACA,KAAAO,OAAA,CAAAC,IAAA;gBACAC,IAAA;cACA;YACA;UACA;QACA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAd,aAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}