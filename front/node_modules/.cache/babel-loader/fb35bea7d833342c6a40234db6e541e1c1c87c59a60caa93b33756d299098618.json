{"ast":null,"code":"export default {\n  name: \"setPassword\",\n  props: {\n    value: String,\n    size: String,\n    placeholder: {\n      type: String,\n      default: \"请输入密码，长度为6-20个字符\"\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    maxlength: {\n      type: Number,\n      default: 20\n    }\n  },\n  data() {\n    return {\n      currentValue: this.value,\n      tipStyle: \"password-tip-none\",\n      strengthValue: 0,\n      progressStatus: \"normal\",\n      strength: \"无\",\n      grade: 0\n    };\n  },\n  methods: {\n    checkStrengthValue(v) {\n      // 评级制判断密码强度 最高5\n      let grade = 0;\n      if (/\\d/.test(v)) {\n        grade++; //数字\n      }\n      if (/[a-z]/.test(v)) {\n        grade++; //小写\n      }\n      if (/[A-Z]/.test(v)) {\n        grade++; //大写\n      }\n      if (/\\W/.test(v)) {\n        grade++; //特殊字符\n      }\n      if (v.length >= 10) {\n        grade++;\n      }\n      this.grade = grade;\n      return grade;\n    },\n    strengthChange() {\n      if (!this.currentValue) {\n        this.tipStyle = \"password-tip-none\";\n        this.strength = \"无\";\n        this.strengthValue = 0;\n        return;\n      }\n      let grade = this.checkStrengthValue(this.currentValue);\n      if (grade <= 1) {\n        this.progressStatus = \"wrong\";\n        this.tipStyle = \"password-tip-weak\";\n        this.strength = \"弱\";\n        this.strengthValue = 33;\n      } else if (grade >= 2 && grade <= 4) {\n        this.progressStatus = \"normal\";\n        this.tipStyle = \"password-tip-middle\";\n        this.strength = \"中\";\n        this.strengthValue = 66;\n      } else {\n        this.progressStatus = \"success\";\n        this.tipStyle = \"password-tip-strong\";\n        this.strength = \"强\";\n        this.strengthValue = 100;\n      }\n    },\n    handleChange(v) {\n      this.strengthChange();\n      this.$emit(\"input\", this.currentValue);\n      this.$emit(\"on-change\", this.currentValue, this.grade, this.strength);\n    },\n    setCurrentValue(value) {\n      if (value === this.currentValue) {\n        return;\n      }\n      this.currentValue = value;\n      this.strengthChange();\n      this.$emit(\"on-change\", this.currentValue, this.grade, this.strength);\n    }\n  },\n  watch: {\n    value(val) {\n      this.setCurrentValue(val);\n    }\n  }\n};","map":{"version":3,"names":["name","props","value","String","size","placeholder","type","default","disabled","Boolean","readonly","maxlength","Number","data","currentValue","tipStyle","strengthValue","progressStatus","strength","grade","methods","checkStrengthValue","v","test","length","strengthChange","handleChange","$emit","setCurrentValue","watch","val"],"sources":["src/views/template/set-password.vue"],"sourcesContent":["<template>\r\n<div class=\"set-password\">\r\n    <Poptip transfer trigger=\"focus\" placement=\"right\" width=\"250\">\r\n        <Input type=\"password\" password :maxlength=\"maxlength\" v-model=\"currentValue\" @on-change=\"handleChange\" :size=\"size\" :placeholder=\"placeholder\" :disabled=\"disabled\" :readonly=\"readonly\" />\r\n        <div :class=\"tipStyle\" slot=\"content\">\r\n            <div class=\"words\">强度 : {{strength}}</div>\r\n            <Progress :percent=\"strengthValue\" :status=\"progressStatus\" hide-info style=\"margin: 13px 0;\" />\r\n        </div>\r\n    </Poptip>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"setPassword\",\r\n    props: {\r\n        value: String,\r\n        size: String,\r\n        placeholder: {\r\n            type: String,\r\n            default: \"请输入密码，长度为6-20个字符\"\r\n        },\r\n        disabled: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        readonly: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        maxlength: {\r\n            type: Number,\r\n            default: 20\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            currentValue: this.value,\r\n            tipStyle: \"password-tip-none\",\r\n            strengthValue: 0,\r\n            progressStatus: \"normal\",\r\n            strength: \"无\",\r\n            grade: 0\r\n        };\r\n    },\r\n    methods: {\r\n        checkStrengthValue(v) {\r\n            // 评级制判断密码强度 最高5\r\n            let grade = 0;\r\n            if (/\\d/.test(v)) {\r\n                grade++; //数字\r\n            }\r\n            if (/[a-z]/.test(v)) {\r\n                grade++; //小写\r\n            }\r\n            if (/[A-Z]/.test(v)) {\r\n                grade++; //大写\r\n            }\r\n            if (/\\W/.test(v)) {\r\n                grade++; //特殊字符\r\n            }\r\n            if (v.length >= 10) {\r\n                grade++;\r\n            }\r\n            this.grade = grade;\r\n            return grade;\r\n        },\r\n        strengthChange() {\r\n            if (!this.currentValue) {\r\n                this.tipStyle = \"password-tip-none\";\r\n                this.strength = \"无\";\r\n                this.strengthValue = 0;\r\n                return;\r\n            }\r\n            let grade = this.checkStrengthValue(this.currentValue);\r\n            if (grade <= 1) {\r\n                this.progressStatus = \"wrong\";\r\n                this.tipStyle = \"password-tip-weak\";\r\n                this.strength = \"弱\";\r\n                this.strengthValue = 33;\r\n            } else if (grade >= 2 && grade <= 4) {\r\n                this.progressStatus = \"normal\";\r\n                this.tipStyle = \"password-tip-middle\";\r\n                this.strength = \"中\";\r\n                this.strengthValue = 66;\r\n            } else {\r\n                this.progressStatus = \"success\";\r\n                this.tipStyle = \"password-tip-strong\";\r\n                this.strength = \"强\";\r\n                this.strengthValue = 100;\r\n            }\r\n        },\r\n        handleChange(v) {\r\n            this.strengthChange();\r\n            this.$emit(\"input\", this.currentValue);\r\n            this.$emit(\"on-change\", this.currentValue, this.grade, this.strength);\r\n        },\r\n        setCurrentValue(value) {\r\n            if (value === this.currentValue) {\r\n                return;\r\n            }\r\n            this.currentValue = value;\r\n            this.strengthChange();\r\n            this.$emit(\"on-change\", this.currentValue, this.grade, this.strength);\r\n        }\r\n    },\r\n    watch: {\r\n        value(val) {\r\n            this.setCurrentValue(val);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.set-password .ivu-poptip,\r\n.set-password .ivu-poptip-rel {\r\n    display: block;\r\n}\r\n\r\n.password-tip-none {\r\n    padding: 1vh 0;\r\n}\r\n\r\n.password-tip-weak {\r\n    padding: 1vh 0;\r\n\r\n    .words {\r\n        color: #ed3f14;\r\n    }\r\n}\r\n\r\n.password-tip-middle {\r\n    padding: 1vh 0;\r\n\r\n    .words {\r\n        color: #2d8cf0;\r\n    }\r\n}\r\n\r\n.password-tip-strong {\r\n    padding: 1vh 0;\r\n\r\n    .words {\r\n        color: #52c41a;\r\n    }\r\n}\r\n</style>\r\n"],"mappings":"AAaA;EACAA,IAAA;EACAC,KAAA;IACAC,KAAA,EAAAC,MAAA;IACAC,IAAA,EAAAD,MAAA;IACAE,WAAA;MACAC,IAAA,EAAAH,MAAA;MACAI,OAAA;IACA;IACAC,QAAA;MACAF,IAAA,EAAAG,OAAA;MACAF,OAAA;IACA;IACAG,QAAA;MACAJ,IAAA,EAAAG,OAAA;MACAF,OAAA;IACA;IACAI,SAAA;MACAL,IAAA,EAAAM,MAAA;MACAL,OAAA;IACA;EACA;EACAM,KAAA;IACA;MACAC,YAAA,OAAAZ,KAAA;MACAa,QAAA;MACAC,aAAA;MACAC,cAAA;MACAC,QAAA;MACAC,KAAA;IACA;EACA;EACAC,OAAA;IACAC,mBAAAC,CAAA;MACA;MACA,IAAAH,KAAA;MACA,SAAAI,IAAA,CAAAD,CAAA;QACAH,KAAA;MACA;MACA,YAAAI,IAAA,CAAAD,CAAA;QACAH,KAAA;MACA;MACA,YAAAI,IAAA,CAAAD,CAAA;QACAH,KAAA;MACA;MACA,SAAAI,IAAA,CAAAD,CAAA;QACAH,KAAA;MACA;MACA,IAAAG,CAAA,CAAAE,MAAA;QACAL,KAAA;MACA;MACA,KAAAA,KAAA,GAAAA,KAAA;MACA,OAAAA,KAAA;IACA;IACAM,eAAA;MACA,UAAAX,YAAA;QACA,KAAAC,QAAA;QACA,KAAAG,QAAA;QACA,KAAAF,aAAA;QACA;MACA;MACA,IAAAG,KAAA,QAAAE,kBAAA,MAAAP,YAAA;MACA,IAAAK,KAAA;QACA,KAAAF,cAAA;QACA,KAAAF,QAAA;QACA,KAAAG,QAAA;QACA,KAAAF,aAAA;MACA,WAAAG,KAAA,SAAAA,KAAA;QACA,KAAAF,cAAA;QACA,KAAAF,QAAA;QACA,KAAAG,QAAA;QACA,KAAAF,aAAA;MACA;QACA,KAAAC,cAAA;QACA,KAAAF,QAAA;QACA,KAAAG,QAAA;QACA,KAAAF,aAAA;MACA;IACA;IACAU,aAAAJ,CAAA;MACA,KAAAG,cAAA;MACA,KAAAE,KAAA,eAAAb,YAAA;MACA,KAAAa,KAAA,mBAAAb,YAAA,OAAAK,KAAA,OAAAD,QAAA;IACA;IACAU,gBAAA1B,KAAA;MACA,IAAAA,KAAA,UAAAY,YAAA;QACA;MACA;MACA,KAAAA,YAAA,GAAAZ,KAAA;MACA,KAAAuB,cAAA;MACA,KAAAE,KAAA,mBAAAb,YAAA,OAAAK,KAAA,OAAAD,QAAA;IACA;EACA;EACAW,KAAA;IACA3B,MAAA4B,GAAA;MACA,KAAAF,eAAA,CAAAE,GAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}