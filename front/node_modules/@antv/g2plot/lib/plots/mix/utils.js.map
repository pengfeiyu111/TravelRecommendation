{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../src/plots/mix/utils.ts"],"names":[],"mappings":";;;AACA,mCAAiC;AACjC,qCAAyC;AACzC,2CAAyD;AACzD,0CAAuD;AACvD,6CAA6D;AAC7D,0CAAuD;AACvD,2CAAyD;AACzD,4CAA2D;AAC3D,gDAAkE;AAClE,kDAAsE;AACtE,gDAAkE;AAClE,qDAA0E;AAC1E,gDAAiE;AACjE,+CAA+D;AAC/D,iDAAmE;AACnE,8CAA6D;AAC7D,6CAA2D;AAC3D,gCAA4C;AAC5C,8BAAyC;AACzC,8BAAyC;AACzC,oCAAkD;AAClD,gCAA4C;AAC5C,kCAA+C;AAC/C,0CAAyD;AACzD,0CAAyD;AACzD,8CAA+D;AAC/D,kDAAqE;AACrE,wCAAwD;AACxD,sCAAqD;AACrD,0CAA2D;AAC3D,oCAAkD;AAClD,kCAA+C;AA+E/C;;GAEG;AACH,IAAM,aAAa,GAAG;IACpB,IAAI,EAAE,iBAAW;IACjB,GAAG,EAAE,iBAAU;IACf,MAAM,EAAE,iBAAa;IACrB,GAAG,EAAE,iBAAU;IACf,IAAI,EAAE,iBAAW;IACjB,KAAK,EAAE,iBAAY;IACnB,WAAW,EAAE,iBAAe;IAC5B,aAAa,EAAE,iBAAiB;IAChC,WAAW,EAAE,iBAAe;IAC5B,eAAe,EAAE,kBAAmB;IACpC,QAAQ,EAAE,kBAAe;IACzB,OAAO,EAAE,kBAAc;IACvB,SAAS,EAAE,kBAAgB;IAC3B,MAAM,EAAE,kBAAa;IACrB,KAAK,EAAE,kBAAY;CACpB,CAAC;AAEF;;;GAGG;AACH,IAAM,gBAAgB,GAAG;IACvB,IAAI,EAAE,WAAI;IACV,GAAG,EAAE,SAAG;IACR,MAAM,EAAE,eAAM;IACd,GAAG,EAAE,SAAG;IACR,IAAI,EAAE,WAAI;IACV,KAAK,EAAE,aAAK;IACZ,WAAW,EAAE,oBAAQ;IACrB,aAAa,EAAE,wBAAU;IACzB,WAAW,EAAE,oBAAQ;IACrB,eAAe,EAAE,4BAAY;IAC7B,QAAQ,EAAE,mBAAQ;IAClB,OAAO,EAAE,iBAAO;IAChB,SAAS,EAAE,qBAAS;IACpB,MAAM,EAAE,eAAM;IACd,KAAK,EAAE,aAAK;CACb,CAAC;AAEF;;GAEG;AACH,IAAM,mBAAmB,GAAG;IAC1B,GAAG,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE;IACrB,MAAM,EAAE,EAAE,OAAO,EAAE,EAAE,WAAW,EAAE,KAAK,EAAE,EAAE;IAC3C,GAAG,EAAE,EAAE,OAAO,EAAE,EAAE,WAAW,EAAE,KAAK,EAAE,EAAE;CACzC,CAAC;AAEF;;;GAGG;AACH,SAAgB,eAAe,CAC7B,IAAO,EACP,IAAU,EACV,OAA8B;IAE9B,IAAM,GAAG,GAAG,gBAAgB,CAAC,IAAI,CAAC,CAAC;IACnC,IAAI,CAAC,GAAG,EAAE;QACR,OAAO,CAAC,KAAK,CAAC,oBAAkB,IAAI,UAAO,CAAC,CAAC;QAC7C,OAAO;KACR;IACD,IAAM,MAAM,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC;IACnC,MAAM,CAAC;QACL,KAAK,EAAE,IAAI;QACX,OAAO,EAAE,kBAAU,CAAC,EAAE,EAAE,GAAG,CAAC,iBAAiB,EAAE,EAAE,UAAG,CAAC,mBAAmB,EAAE,IAAI,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC;KAC9F,CAAC,CAAC;AACL,CAAC;AAfD,0CAeC","sourcesContent":["import { View } from '@antv/g2';\nimport { get } from '@antv/util';\nimport { deepAssign } from '../../utils';\nimport { adaptor as lineAdaptor } from '../line/adaptor';\nimport { adaptor as pieAdaptor } from '../pie/adaptor';\nimport { adaptor as columnAdaptor } from '../column/adaptor';\nimport { adaptor as barAdaptor } from '../bar/adaptor';\nimport { adaptor as areaAdaptor } from '../area/adaptor';\nimport { adaptor as gaugeAdaptor } from '../gauge/adaptor';\nimport { adaptor as tinyLineAdaptor } from '../tiny-line/adaptor';\nimport { adaptor as tinyColumnAdaptor } from '../tiny-column/adaptor';\nimport { adaptor as tinyAreaAdaptor } from '../tiny-area/adaptor';\nimport { adaptor as ringProgressAdaptor } from '../ring-progress/adaptor';\nimport { adaptor as progressAdaptor } from '../progress/adaptor';\nimport { adaptor as scatterAdaptor } from '../scatter/adaptor';\nimport { adaptor as histogramAdaptor } from '../histogram/adaptor';\nimport { adaptor as funnelAdaptor } from '../funnel/adaptor';\nimport { adaptor as stockAdaptor } from '../stock/adaptor';\nimport { Line, LineOptions } from '../line';\nimport { Pie, PieOptions } from '../pie';\nimport { Bar, BarOptions } from '../bar';\nimport { Column, ColumnOptions } from '../column';\nimport { Area, AreaOptions } from '../area';\nimport { Gauge, GaugeOptions } from '../gauge';\nimport { TinyLine, TinyLineOptions } from '../tiny-line';\nimport { TinyArea, TinyAreaOptions } from '../tiny-area';\nimport { TinyColumn, TinyColumnOptions } from '../tiny-column';\nimport { RingProgress, RingProgressOptions } from '../ring-progress';\nimport { Progress, ProgressOptions } from '../progress';\nimport { Scatter, ScatterOptions } from '../scatter';\nimport { Histogram, HistogramOptions } from '../histogram';\nimport { Funnel, FunnelOptions } from '../funnel';\nimport { Stock, StockOptions } from '../stock';\nimport { Options } from '../../types';\n\n/**\n * 移除 options 中的 width、height 设置, 将 options 的 data 设置为可选\n */\ntype PlotOptions<T> = Omit<T, 'width' | 'height' | 'data'> & Partial<Pick<T extends Options ? T : never, 'data'>>;\n\n/**\n * multi-view 中的支持的 plots 类型（带 options 定义）\n */\nexport type IPlotTypes =\n  | {\n      /**\n       * plot 类型\n       */\n      readonly type: 'line';\n      /**\n       * plot 配置\n       */\n      readonly options: PlotOptions<LineOptions>;\n    }\n  | {\n      readonly type: 'pie';\n      readonly options: PlotOptions<PieOptions>;\n    }\n  | {\n      readonly type: 'bar';\n      readonly options: PlotOptions<BarOptions>;\n    }\n  | {\n      readonly type: 'column';\n      readonly options: PlotOptions<ColumnOptions>;\n    }\n  | {\n      readonly type: 'area';\n      readonly options: PlotOptions<AreaOptions>;\n    }\n  | {\n      readonly type: 'gauge';\n      readonly options: PlotOptions<GaugeOptions>;\n    }\n  | {\n      readonly type: 'tiny-line';\n      readonly options: PlotOptions<TinyLineOptions>;\n    }\n  | {\n      readonly type: 'tiny-area';\n      readonly options: PlotOptions<TinyAreaOptions>;\n    }\n  | {\n      readonly type: 'tiny-column';\n      readonly options: PlotOptions<TinyColumnOptions>;\n    }\n  | {\n      readonly type: 'ring-progress';\n      readonly options: PlotOptions<RingProgressOptions>;\n    }\n  | {\n      readonly type: 'progress';\n      readonly options: PlotOptions<ProgressOptions>;\n    }\n  | {\n      readonly type: 'histogram';\n      readonly options: PlotOptions<HistogramOptions>;\n    }\n  | {\n      readonly type: 'scatter';\n      readonly options: PlotOptions<ScatterOptions>;\n    }\n  | {\n      readonly type: 'funnel';\n      readonly options: PlotOptions<FunnelOptions>;\n    }\n  | {\n      readonly type: 'stock';\n      readonly options: PlotOptions<StockOptions>;\n    };\n\n/**\n * 可在 multi-view 中使用的 plots\n */\nconst PLOT_ADAPTORS = {\n  line: lineAdaptor,\n  pie: pieAdaptor,\n  column: columnAdaptor,\n  bar: barAdaptor,\n  area: areaAdaptor,\n  gauge: gaugeAdaptor,\n  'tiny-line': tinyLineAdaptor,\n  'tiny-column': tinyColumnAdaptor,\n  'tiny-area': tinyAreaAdaptor,\n  'ring-progress': ringProgressAdaptor,\n  progress: progressAdaptor,\n  scatter: scatterAdaptor,\n  histogram: histogramAdaptor,\n  funnel: funnelAdaptor,\n  stock: stockAdaptor,\n};\n\n/**\n * 获取指定 plot 的 class contructor\n * @param {string} plot\n */\nconst PLOT_CONSTRUCTOR = {\n  line: Line,\n  pie: Pie,\n  column: Column,\n  bar: Bar,\n  area: Area,\n  gauge: Gauge,\n  'tiny-line': TinyLine,\n  'tiny-column': TinyColumn,\n  'tiny-area': TinyArea,\n  'ring-progress': RingProgress,\n  progress: Progress,\n  scatter: Scatter,\n  histogram: Histogram,\n  funnel: Funnel,\n  stock: Stock,\n};\n\n/**\n * 在 mix 图表以及 facet 图表中，defaultOptions 进行复写简化\n */\nconst DEFAULT_OPTIONS_MAP = {\n  pie: { label: false },\n  column: { tooltip: { showMarkers: false } },\n  bar: { tooltip: { showMarkers: false } },\n};\n\n/**\n * 执行 plot 的 adaptor, 默认都带上 defaultOptions\n * @param {string} plot\n */\nexport function execPlotAdaptor<T extends IPlotTypes['type']>(\n  plot: T,\n  view: View,\n  options: IPlotTypes['options']\n): void {\n  const cls = PLOT_CONSTRUCTOR[plot];\n  if (!cls) {\n    console.error(`could not find ${plot} plot`);\n    return;\n  }\n  const module = PLOT_ADAPTORS[plot];\n  module({\n    chart: view,\n    options: deepAssign({}, cls.getDefaultOptions(), get(DEFAULT_OPTIONS_MAP, plot, {}), options),\n  });\n}\n"]}