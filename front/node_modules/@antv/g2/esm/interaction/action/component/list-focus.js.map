{"version":3,"file":"list-focus.js","sourceRoot":"","sources":["../../../../src/interaction/action/component/list-focus.ts"],"names":[],"mappings":";AAAA,OAAO,SAAS,MAAM,cAAc,CAAC;AAErC,IAAM,gBAAgB,GAAG,WAAW,CAAC;AAErC;IAAwB,6BAAS;IAAjC;;IA6BA,CAAC;IA5BQ,0BAAM,GAAb;;QACE,IAAM,WAAW,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC9C,IAAI,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,IAAI,EAAE;YACb,IAAA,MAAI,GAAwB,WAAW,KAAnC,EAAQ,WAAW,GAAK,WAAW,KAAhB,CAAiB;YAChD,IAAM,KAAK,GAAG,MAAI,CAAC,QAAQ,EAAE,CAAC;YAC9B,IAAM,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,MAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,gBAAgB,CAAC,EAAnC,CAAmC,CAAC,CAAC;YAC9E,IAAM,cAAc,GAAG,KAAK,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,MAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,gBAAgB,CAAC,EAAlC,CAAkC,CAAC,CAAC;YAC/E,IAAM,WAAW,GAAG,YAAY,CAAC,CAAC,CAAC,CAAA;YACnC;;;;;;eAMG;YACH,IAAI,KAAK,CAAC,MAAM,KAAK,YAAY,CAAC,MAAM,EAAE;;oBACxC,KAAmB,IAAA,UAAA,SAAA,KAAK,CAAA,4BAAA;wBAAnB,IAAM,IAAI,kBAAA;wBAAW,MAAI,CAAC,YAAY,CAAC,IAAI,EAAE,gBAAgB,EAAE,IAAI,CAAC,EAAE,KAAK,WAAW,CAAC,EAAE,CAAC,CAAC;qBAAA;;;;;;;;;aACjG;iBAAM,IAAI,KAAK,CAAC,MAAM,GAAG,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE;gBACrD,IAAI,WAAW,CAAC,EAAE,KAAK,WAAW,CAAC,EAAE,EAAE;;wBACrC,KAAmB,IAAA,UAAA,SAAA,KAAK,CAAA,4BAAA;4BAAnB,IAAM,IAAI,kBAAA;4BAAW,MAAI,CAAC,YAAY,CAAC,IAAI,EAAE,gBAAgB,EAAE,KAAK,CAAC,CAAC;yBAAA;;;;;;;;;iBAC5E;qBAAM;;wBACL,KAAmB,IAAA,UAAA,SAAA,KAAK,CAAA,4BAAA;4BAAnB,IAAM,IAAI,kBAAA;4BAAW,MAAI,CAAC,YAAY,CAAC,IAAI,EAAE,gBAAgB,EAAE,IAAI,CAAC,EAAE,KAAK,WAAW,CAAC,EAAE,CAAC,CAAC;yBAAA;;;;;;;;;iBACjG;aACF;iBAAM;;oBACL,KAAmB,IAAA,UAAA,SAAA,KAAK,CAAA,4BAAA;wBAAnB,IAAM,IAAI,kBAAA;wBAAW,MAAI,CAAC,YAAY,CAAC,IAAI,EAAE,gBAAgB,EAAE,IAAI,CAAC,EAAE,KAAK,WAAW,CAAC,EAAE,CAAC,CAAC;qBAAA;;;;;;;;;aACjG;SACF;IACH,CAAC;IACH,gBAAC;AAAD,CAAC,AA7BD,CAAwB,SAAS,GA6BhC;AAED,eAAe,SAAS,CAAC","sourcesContent":["import ListState from './list-state';\n\nconst STATUS_UNCHECKED = 'unchecked';\n\nclass ListFocus extends ListState {\n  public toggle() {\n    const triggerInfo = this.getTriggerListInfo();\n    if (triggerInfo?.item) {\n      const { list, item: clickedItem } = triggerInfo;\n      const items = list.getItems();\n      const checkedItems = items.filter((t) => !list.hasState(t, STATUS_UNCHECKED));\n      const uncheckedItems = items.filter((t) => list.hasState(t, STATUS_UNCHECKED));\n      const checkedItem = checkedItems[0]\n      /**\n       * 1. 初始化，全部 checked。此时，点击 radio, clickItem 进入聚焦\n       * 2. 当前只选中一个\n       *    2.1 且选中 item 等于 clickItem，退出聚焦，全部重新选中\n       *    2.2 替换聚焦的 item\n       * 3. 其它，同 2.2\n       */\n      if (items.length === checkedItems.length) {\n        for (const item of items) list.setItemState(item, STATUS_UNCHECKED, item.id !== clickedItem.id);\n      } else if (items.length - uncheckedItems.length === 1) {\n        if (checkedItem.id === clickedItem.id) {\n          for (const item of items) list.setItemState(item, STATUS_UNCHECKED, false);\n        } else {\n          for (const item of items) list.setItemState(item, STATUS_UNCHECKED, item.id !== clickedItem.id);\n        }\n      } else {\n        for (const item of items) list.setItemState(item, STATUS_UNCHECKED, item.id !== clickedItem.id);\n      }\n    }\n  }\n}\n\nexport default ListFocus;\n"]}